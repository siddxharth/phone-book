{"ast":null,"code":"function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { getHoverIndicatorStyle, selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \" \", \" display:block;width:100%;\"], function (props) {\n  return props.selected && props.textComponent && selectedStyle;\n}, function (props) {\n  return props.active && getHoverIndicatorStyle(!props.children && !props.theme.select.options ? undefined : 'background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n      onClear = _ref.onClear,\n      name = _ref.name,\n      theme = _ref.theme;\n  var label = clear.label,\n      position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(Button, {\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n      _ref2$children = _ref2.children,\n      children = _ref2$children === void 0 ? null : _ref2$children,\n      disabled = _ref2.disabled,\n      disabledKey = _ref2.disabledKey,\n      dropHeight = _ref2.dropHeight,\n      _ref2$emptySearchMess = _ref2.emptySearchMessage,\n      emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n      id = _ref2.id,\n      labelKey = _ref2.labelKey,\n      multiple = _ref2.multiple,\n      name = _ref2.name,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onMore = _ref2.onMore,\n      onSearch = _ref2.onSearch,\n      optionIndexesInValue = _ref2.optionIndexesInValue,\n      options = _ref2.options,\n      allOptions = _ref2.allOptions,\n      searchPlaceholder = _ref2.searchPlaceholder,\n      search = _ref2.search,\n      setSearch = _ref2.setSearch,\n      selected = _ref2.selected,\n      usingKeyboard = _ref2.usingKeyboard,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? '' : _ref2$value,\n      valueKey = _ref2.valueKey,\n      _ref2$replace = _ref2.replace,\n      replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(usingKeyboard ? 0 : -1),\n      activeIndex = _useState[0],\n      setActiveIndex = _useState[1];\n\n  var _useState2 = useState(usingKeyboard),\n      keyboardNavigation = _useState2[0],\n      setKeyboardNavigation = _useState2[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef(); // for keyboard/screenreader, keep the active option in focus\n\n  useEffect(function () {\n    var _activeRef$current;\n\n    if (activeIndex) (_activeRef$current = activeRef.current) == null ? void 0 : _activeRef$current.focus();\n  }, [activeIndex]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    var clearButton = clearRef.current;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position === 'bottom' && clearButton && nextActiveIndex >= options.length) {\n      setActiveIndex(options.length);\n      setFocusWithoutScroll(clearButton);\n    }\n  }, [activeIndex, isDisabled, options, clear]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    var clearButton = clearRef.current;\n\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n\n      if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position !== 'bottom' && clearButton && activeIndex === 0) {\n      setActiveIndex(-1);\n    }\n  }, [activeIndex, isDisabled, clear]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, isDisabled, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options]);\n\n  var shouldShowClearButton = function shouldShowClearButton(position) {\n    var hasValue = Boolean(multiple ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  };\n\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    var textComponent = false;\n\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index)));\n      textComponent = true;\n    } // if we have a child, turn on plain, and hoverIndicator\n\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true\n  }, /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage))), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }))));\n});\nexport { SelectContainer };","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","styled","ThemeContext","getHoverIndicatorStyle","selectedStyle","setFocusWithoutScroll","defaultProps","Box","Button","InfiniteScroll","Keyboard","Text","TextInput","StyledContainer","applyKey","OptionsBox","div","withConfig","displayName","componentId","SelectOption","props","selected","textComponent","active","children","theme","select","options","undefined","ClearButton","_ref","ref","clear","onClear","name","label","position","align","buttonLabel","createElement","fill","onClick","focusIndicator","container","text","SelectContainer","_ref2","_ref2$children","disabled","disabledKey","dropHeight","_ref2$emptySearchMess","emptySearchMessage","id","labelKey","multiple","onChange","onKeyDown","onMore","onSearch","optionIndexesInValue","allOptions","searchPlaceholder","search","setSearch","usingKeyboard","_ref2$value","value","valueKey","_ref2$replace","replace","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","clearRef","activeRef","_activeRef$current","current","focus","timer","setTimeout","optionsNode","clearButton","searchInput","clearTimeout","optionLabel","index","optionValue","isDisabled","option","result","Array","isArray","indexOf","optionVal","isSelected","some","valueItem","valueValue","selectOption","event","nextValue","nextSelected","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","map","reduce","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","e","charAt","toLowerCase","onActiveOption","onSelectOption","shouldShowClearButton","hasValue","Boolean","showAtPosition","customSearchInput","SelectTextInput","selectOptionsStyle","box","onEnter","onSpace","onUp","onDown","as","pad","flex","size","type","placeholder","nextSearch","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","child","node","plain","kind","onMouseOver","hoverIndicator"],"sources":["/Users/siddharthkhatri/Developer/React JS/phone-book/client/node_modules/grommet/es6/components/Select/SelectContainer.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { getHoverIndicatorStyle, selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \" \", \" display:block;width:100%;\"], function (props) {\n  return props.selected && props.textComponent && selectedStyle;\n}, function (props) {\n  return props.active && getHoverIndicatorStyle(!props.children && !props.theme.select.options ? undefined : 'background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n      onClear = _ref.onClear,\n      name = _ref.name,\n      theme = _ref.theme;\n  var label = clear.label,\n      position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(Button, {\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n      _ref2$children = _ref2.children,\n      children = _ref2$children === void 0 ? null : _ref2$children,\n      disabled = _ref2.disabled,\n      disabledKey = _ref2.disabledKey,\n      dropHeight = _ref2.dropHeight,\n      _ref2$emptySearchMess = _ref2.emptySearchMessage,\n      emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n      id = _ref2.id,\n      labelKey = _ref2.labelKey,\n      multiple = _ref2.multiple,\n      name = _ref2.name,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onMore = _ref2.onMore,\n      onSearch = _ref2.onSearch,\n      optionIndexesInValue = _ref2.optionIndexesInValue,\n      options = _ref2.options,\n      allOptions = _ref2.allOptions,\n      searchPlaceholder = _ref2.searchPlaceholder,\n      search = _ref2.search,\n      setSearch = _ref2.setSearch,\n      selected = _ref2.selected,\n      usingKeyboard = _ref2.usingKeyboard,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? '' : _ref2$value,\n      valueKey = _ref2.valueKey,\n      _ref2$replace = _ref2.replace,\n      replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(usingKeyboard ? 0 : -1),\n      activeIndex = _useState[0],\n      setActiveIndex = _useState[1];\n\n  var _useState2 = useState(usingKeyboard),\n      keyboardNavigation = _useState2[0],\n      setKeyboardNavigation = _useState2[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef(); // for keyboard/screenreader, keep the active option in focus\n\n  useEffect(function () {\n    var _activeRef$current;\n\n    if (activeIndex) (_activeRef$current = activeRef.current) == null ? void 0 : _activeRef$current.focus();\n  }, [activeIndex]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    var clearButton = clearRef.current;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position === 'bottom' && clearButton && nextActiveIndex >= options.length) {\n      setActiveIndex(options.length);\n      setFocusWithoutScroll(clearButton);\n    }\n  }, [activeIndex, isDisabled, options, clear]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    var clearButton = clearRef.current;\n\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n\n      if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n\n    if (clear && clear.position !== 'bottom' && clearButton && activeIndex === 0) {\n      setActiveIndex(-1);\n    }\n  }, [activeIndex, isDisabled, clear]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, isDisabled, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options]);\n\n  var shouldShowClearButton = function shouldShowClearButton(position) {\n    var hasValue = Boolean(multiple ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  };\n\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    var textComponent = false;\n\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index)));\n      textComponent = true;\n    } // if we have a child, turn on plain, and hoverIndicator\n\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true\n  }, /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage))), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme\n  }))));\n});\nexport { SelectContainer };"],"mappings":"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"},"metadata":{},"sourceType":"module"}