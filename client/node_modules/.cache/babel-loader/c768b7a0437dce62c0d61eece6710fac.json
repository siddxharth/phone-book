{"ast":null,"code":"var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\", \"timestamp\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useRef, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, handleOffset, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { CalendarPropTypes } from './propTypes';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar getLocaleString = function getLocaleString(value, locale) {\n  return value == null ? void 0 : value.toLocaleDateString(locale, {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  });\n};\n\nvar currentlySelectedString = function currentlySelectedString(value, locale) {\n  var selected;\n\n  if (value instanceof Date) {\n    selected = \"Currently selected \" + getLocaleString(value, locale) + \";\";\n  } else if (value != null && value.length) {\n    selected = \"Currently selected \" + value.map(function (item) {\n      var dates;\n\n      if (!Array.isArray(item)) {\n        dates = \"\" + getLocaleString(item, locale);\n      } else {\n        var start = item[0] !== undefined ? getLocaleString(item[0], locale) : 'none';\n        var end = item[1] !== undefined ? getLocaleString(item[1], locale) : 'none';\n        dates = start + \" through \" + end;\n      }\n\n      return dates;\n    });\n  } else {\n    selected = 'No date selected';\n  }\n\n  return selected;\n}; // calendar value may be a single date, multiple dates, a range of dates\n// supplied as ISOstrings.\n\n\nvar normalizeInput = function normalizeInput(dateValue) {\n  var result;\n\n  if (dateValue instanceof Date) {\n    result = dateValue;\n  } // date may be an empty string ''\n  else if (typeof dateValue === 'string' && dateValue.length) {\n    var adjustedDate = new Date(dateValue); // if time is not specified in ISOstring, normalize to midnight\n\n    if (dateValue.indexOf('T') === -1) {\n      var offset = adjustedDate.getTimezoneOffset();\n      var hour = adjustedDate.getHours();\n      adjustedDate.setHours(hour, offset);\n    }\n\n    result = adjustedDate;\n  } else if (Array.isArray(dateValue)) {\n    result = dateValue.map(function (d) {\n      return normalizeInput(d);\n    });\n  }\n\n  return result;\n};\n\nvar normalizeOutput = function normalizeOutput(dateValue, outputFormat) {\n  var result;\n\n  var normalize = function normalize(value) {\n    var normalizedValue = value.toISOString();\n\n    if (normalizedValue && outputFormat === 'no timezone') {\n      var _handleOffset$toISOSt = handleOffset(normalizedValue).toISOString().split('T');\n\n      normalizedValue = _handleOffset$toISOSt[0];\n    }\n\n    return normalizedValue;\n  };\n\n  if (dateValue instanceof Date) {\n    result = normalize(dateValue);\n  } else if (typeof dateValue === 'undefined') {\n    result = undefined;\n  } else {\n    result = dateValue.map(function (d) {\n      return normalizeOutput(d, outputFormat);\n    });\n  }\n\n  return result;\n}; // format value to [[]] for internal functions\n\n\nvar normalizeRange = function normalizeRange(value, activeDate) {\n  var range = value;\n  if (range instanceof Date) range = activeDate === 'start' ? [[undefined, range]] : [[range, undefined]];else if (Array.isArray(range) && !Array.isArray(range[0])) range = [range];\n  return range;\n};\n\nvar getReference = function getReference(reference, value) {\n  var nextReference;\n\n  if (value) {\n    if (Array.isArray(value)) {\n      if (value[0] instanceof Date) {\n        nextReference = value[0];\n      } else if (Array.isArray(value[0])) {\n        nextReference = value[0][0] ? value[0][0] : value[0][1];\n      } else {\n        nextReference = new Date();\n        nextReference.setHours(0, 0, 0, 0);\n      }\n    } else nextReference = value;\n  } else if (reference) {\n    nextReference = reference;\n  } else {\n    nextReference = new Date();\n    nextReference.setHours(0, 0, 0, 0);\n  }\n\n  return nextReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nexport var getOutputFormat = function getOutputFormat(dates) {\n  if (typeof dates === 'string' && (dates == null ? void 0 : dates.indexOf('T')) === -1) {\n    return 'no timezone';\n  }\n\n  if (Array.isArray(dates)) {\n    return getOutputFormat(dates[0]);\n  }\n\n  return 'date timezone';\n};\nvar millisecondsPerYear = 31557600000;\n\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\n\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n      fill = _ref.fill,\n      size = _ref.size,\n      isInRange = _ref.isInRange,\n      isSelected = _ref.isSelected,\n      otherMonth = _ref.otherMonth,\n      _ref$buttonProps = _ref.buttonProps,\n      buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    disabledProp: buttonProps.disabled,\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\n\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n      fill = _ref2.fill,\n      size = _ref2.size,\n      buttonProps = _ref2.buttonProps;\n\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\n\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var activeDateProp = _ref3.activeDate,\n      _ref3$animate = _ref3.animate,\n      animate = _ref3$animate === void 0 ? true : _ref3$animate,\n      boundsProp = _ref3.bounds,\n      children = _ref3.children,\n      dateProp = _ref3.date,\n      datesProp = _ref3.dates,\n      daysOfWeek = _ref3.daysOfWeek,\n      disabled = _ref3.disabled,\n      initialFocus = _ref3.initialFocus,\n      fill = _ref3.fill,\n      _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n      firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n      header = _ref3.header,\n      _ref3$locale = _ref3.locale,\n      locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n      messages = _ref3.messages,\n      onReference = _ref3.onReference,\n      onSelect = _ref3.onSelect,\n      range = _ref3.range,\n      referenceProp = _ref3.reference,\n      _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n      showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n      timestampProp = _ref3.timestamp,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format; // when mousedown, we don't want to let Calendar set\n  // active date to firstInMonth\n\n\n  var _useState = useState(false),\n      mouseDown = _useState[0],\n      setMouseDown = _useState[1];\n\n  var onMouseDown = function onMouseDown() {\n    return setMouseDown(true);\n  };\n\n  var onMouseUp = function onMouseUp() {\n    return setMouseDown(false);\n  };\n\n  useEffect(function () {\n    document.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mouseup', onMouseUp);\n    return function () {\n      document.removeEventListener('mousedown', onMouseDown);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []); // set activeDate when caller changes it, allows us to change\n  // it internally too\n\n  var _useState2 = useState(dateProp && typeof dateProp === 'string' && range ? 'end' : 'start'),\n      activeDate = _useState2[0],\n      setActiveDate = _useState2[1];\n\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]);\n\n  var _useState3 = useState(normalizeInput(dateProp || datesProp)),\n      value = _useState3[0],\n      setValue = _useState3[1];\n\n  useEffect(function () {\n    var val = dateProp || datesProp;\n    setValue(normalizeInput(val));\n  }, [dateProp, datesProp]);\n\n  var _useState4 = useState(getReference(normalizeInput(referenceProp), value)),\n      reference = _useState4[0],\n      setReference = _useState4[1];\n\n  useEffect(function () {\n    if (value) {\n      setReference(getReference(normalizeInput(referenceProp), value));\n    }\n  }, [referenceProp, value]);\n\n  var _useState5 = useState(getOutputFormat(dateProp || datesProp)),\n      outputFormat = _useState5[0],\n      setOutputFormat = _useState5[1];\n\n  useEffect(function () {\n    setOutputFormat(getOutputFormat(dateProp || datesProp));\n  }, [dateProp, datesProp]); // normalize bounds\n\n  var _useState6 = useState(boundsProp),\n      bounds = _useState6[0],\n      setBounds = _useState6[1];\n\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp);else setBounds(undefined);\n  }, [boundsProp]); // calculate the bounds we display based on the reference\n\n  var _useState7 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState7[0],\n      setDisplayBounds = _useState7[1];\n\n  var _useState8 = useState(),\n      targetDisplayBounds = _useState8[0],\n      setTargetDisplayBounds = _useState8[1];\n\n  var _useState9 = useState(),\n      slide = _useState9[0],\n      setSlide = _useState9[1];\n\n  var _useState10 = useState(),\n      animating = _useState10[0],\n      setAnimating = _useState10[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek); // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    // if the reference timezone has changed (e.g., controlled component),\n    // both ends of the displayBounds should inherit that new timestamp\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime() || targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], targetDisplayBounds[1]]);\n      }\n\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear && daysApart(displayBounds[0], targetDisplayBounds[0])) {\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear && daysApart(targetDisplayBounds[1], displayBounds[1])) {\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n\n      return undefined;\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]); // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [animating, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n\n  var _useState11 = useState(),\n      focus = _useState11[0],\n      setFocus = _useState11[1];\n\n  var _useState12 = useState(),\n      active = _useState12[0],\n      setActive = _useState12[1];\n\n  useEffect(function () {\n    if (initialFocus === 'days') daysRef.current.focus();\n  }, [initialFocus]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, bounds]);\n  var handleRange = useCallback(function (selectedDate) {\n    var _priorRange$, _priorRange$$, _priorRange$2, _priorRange$2$;\n\n    var result;\n    var priorRange = normalizeRange(value, activeDate); // deselect when date clicked was the start/end of the range\n\n    if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$ = priorRange[0]) == null ? void 0 : (_priorRange$$ = _priorRange$[0]) == null ? void 0 : _priorRange$$.getTime())) {\n      result = [[undefined, priorRange[0][1]]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$2 = priorRange[0]) == null ? void 0 : (_priorRange$2$ = _priorRange$2[1]) == null ? void 0 : _priorRange$2$.getTime())) {\n      result = [[priorRange[0][0], undefined]];\n      setActiveDate('end');\n    } // selecting start date\n    else if (activeDate === 'start') {\n      if (!priorRange) {\n        result = [[selectedDate, undefined]];\n      } else if (!priorRange[0][1]) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() < priorRange[0][1].getTime()) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() > priorRange[0][1].getTime()) {\n        result = [[selectedDate, undefined]];\n      }\n\n      setActiveDate('end');\n    } // selecting end date\n    else if (!priorRange) {\n      result = [[undefined, selectedDate]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() < priorRange[0][0].getTime()) {\n      result = [[selectedDate, undefined]];\n      setActiveDate('end');\n    } else if (selectedDate.getTime() > priorRange[0][0].getTime()) {\n      result = [[priorRange[0][0], selectedDate]];\n      setActiveDate('start');\n    } // If no dates selected, always return undefined; else format\n    // result according to specified range value.\n\n\n    if (result[0].includes(undefined)) {\n      if (range === 'array') {\n        result = !result[0][0] && !result[0][1] ? undefined : result;\n      } else {\n        result = result[0].find(function (d) {\n          return d !== undefined;\n        });\n      }\n    }\n\n    setValue(result);\n    return result;\n  }, [activeDate, value, range]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextValue;\n\n    if (range || Array.isArray(value == null ? void 0 : value[0])) {\n      nextValue = handleRange(selectedDate);\n    } else {\n      nextValue = selectedDate;\n    }\n\n    if (onSelect) {\n      nextValue = normalizeOutput(nextValue, outputFormat);\n      onSelect(nextValue);\n    }\n  }, [handleRange, onSelect, outputFormat, range, value]);\n\n  var _onClick = function onClick(selectedDate) {\n    selectDate(selectedDate);\n    announce(\"Selected \" + getLocaleString(selectedDate, locale), 'assertive'); // Chrome moves the focus indicator to this button. Set\n    // the focus to the grid of days instead.\n\n    daysRef.current.focus();\n    setActive(selectedDate);\n  };\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, bounds),\n      onClick: function onClick() {\n        changeReference(previousMonth);\n        announce(format({\n          id: 'calendar.previousMove',\n          messages: messages,\n          values: {\n            date: previousMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, bounds),\n      onClick: function onClick() {\n        changeReference(nextMonth);\n        announce(format({\n          id: 'calendar.nextMove',\n          messages: messages,\n          values: {\n            date: nextMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      (function () {\n        var dateObject = day; // this.dayRefs[dateObject] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, range ? normalizeRange(value, activeDate) : value);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, normalizeInput(disabled)) || bounds && !betweenDates(day, normalizeInput(bounds));\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateObject;\n        }\n\n        if (!children) {\n          days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n            key: day.getTime(),\n            buttonProps: {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                return _onClick(dateObject);\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(dateObject);\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            },\n            isInRange: inRange,\n            isSelected: selected,\n            otherMonth: day.getMonth() !== reference.getMonth(),\n            size: size,\n            fill: fill\n          }, day.getDate()));\n        } else {\n          days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n            key: day.getTime(),\n            buttonProps: onSelect ? {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                return _onClick(dateObject);\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(dateObject);\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            } : null,\n            size: size,\n            fill: fill\n          }, children({\n            date: day,\n            day: day.getDate(),\n            isInRange: inRange,\n            isSelected: selected\n          })));\n        }\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return active !== undefined ? _onClick(active) : undefined;\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n\n      if (!betweenDates(addDays(active, -7), displayBounds)) {\n        changeReference(addDays(active, -7));\n      }\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n\n      if (!betweenDates(addDays(active, 7), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onLeft: function onLeft() {\n      setActive(addDays(active, -1));\n\n      if (!betweenDates(addDays(active, -1), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onRight: function onRight() {\n      setActive(addDays(active, 1));\n\n      if (!betweenDates(addDays(active, 2), displayBounds)) {\n        changeReference(active);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    tabIndex: 0,\n    role: \"grid\",\n    \"aria-label\": reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \"; \" + currentlySelectedString(value, locale),\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true); // caller focused onto Calendar via keyboard\n\n      if (!mouseDown) {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };","map":{"version":3,"names":["_excluded","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","bind","arguments","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useMemo","useRef","useState","useEffect","ThemeContext","defaultProps","AnnounceContext","MessageContext","Box","Button","Heading","Keyboard","StyledCalendar","StyledDay","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","handleOffset","startOfMonth","subtractDays","subtractMonths","withinDates","CalendarPropTypes","headingPadMap","small","medium","large","getLocaleString","value","locale","toLocaleDateString","month","day","year","currentlySelectedString","selected","Date","map","item","dates","Array","isArray","start","undefined","end","normalizeInput","dateValue","result","adjustedDate","offset","getTimezoneOffset","hour","getHours","setHours","d","normalizeOutput","outputFormat","normalize","normalizedValue","toISOString","_handleOffset$toISOSt","split","normalizeRange","activeDate","range","getReference","reference","nextReference","buildDisplayBounds","firstDayOfWeek","setDate","getDay","getOutputFormat","millisecondsPerYear","CalendarDayButton","props","createElement","tabIndex","plain","CalendarDay","_ref","children","fill","size","isInRange","isSelected","otherMonth","_ref$buttonProps","buttonProps","role","sizeProp","fillContainer","disabledProp","disabled","inRange","CalendarCustomDay","_ref2","Calendar","_ref3","ref","activeDateProp","_ref3$animate","animate","boundsProp","bounds","dateProp","date","datesProp","daysOfWeek","initialFocus","_ref3$firstDayOfWeek","header","_ref3$locale","messages","onReference","onSelect","referenceProp","_ref3$showAdjacentDay","showAdjacentDays","_ref3$size","timestampProp","timestamp","rest","theme","announce","_useContext","format","_useState","mouseDown","setMouseDown","onMouseDown","onMouseUp","document","addEventListener","removeEventListener","_useState2","setActiveDate","_useState3","setValue","val","_useState4","setReference","_useState5","setOutputFormat","_useState6","setBounds","_useState7","displayBounds","setDisplayBounds","_useState8","targetDisplayBounds","setTargetDisplayBounds","_useState9","slide","setSlide","_useState10","animating","setAnimating","nextDisplayBounds","getTime","diffBoundsAboveYear","direction","weeks","timer","setTimeout","clearTimeout","previousMonth","nextMonth","daysRef","_useState11","focus","setFocus","_useState12","active","setActive","current","changeReference","handleRange","selectedDate","_priorRange$","_priorRange$$","_priorRange$2","_priorRange$2$","priorRange","includes","find","selectDate","nextValue","_onClick","onClick","renderCalendarHeader","PreviousIcon","calendar","icons","previous","NextIcon","next","justify","align","flex","pad","horizontal","level","heading","margin","a11yTitle","id","values","icon","renderDaysOfWeek","days","push","weekday","firstDayInMonth","blankWeek","getMonth","getDate","dateObject","selectedState","dayDisabled","toDateString","onMouseOver","onMouseOut","onPreviousMonth","onNextMonth","previousInBound","nextInBound","onEnter","onUp","event","preventDefault","stopPropagation","onDown","onLeft","onRight","onFocus","onBlur","displayName","propTypes"],"sources":["/Users/siddharthkhatri/Developer/React JS/phone-book/node_modules/grommet/es6/components/Calendar/Calendar.js"],"sourcesContent":["var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\", \"timestamp\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useRef, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, handleOffset, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { CalendarPropTypes } from './propTypes';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar getLocaleString = function getLocaleString(value, locale) {\n  return value == null ? void 0 : value.toLocaleDateString(locale, {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  });\n};\n\nvar currentlySelectedString = function currentlySelectedString(value, locale) {\n  var selected;\n\n  if (value instanceof Date) {\n    selected = \"Currently selected \" + getLocaleString(value, locale) + \";\";\n  } else if (value != null && value.length) {\n    selected = \"Currently selected \" + value.map(function (item) {\n      var dates;\n\n      if (!Array.isArray(item)) {\n        dates = \"\" + getLocaleString(item, locale);\n      } else {\n        var start = item[0] !== undefined ? getLocaleString(item[0], locale) : 'none';\n        var end = item[1] !== undefined ? getLocaleString(item[1], locale) : 'none';\n        dates = start + \" through \" + end;\n      }\n\n      return dates;\n    });\n  } else {\n    selected = 'No date selected';\n  }\n\n  return selected;\n}; // calendar value may be a single date, multiple dates, a range of dates\n// supplied as ISOstrings.\n\n\nvar normalizeInput = function normalizeInput(dateValue) {\n  var result;\n\n  if (dateValue instanceof Date) {\n    result = dateValue;\n  } // date may be an empty string ''\n  else if (typeof dateValue === 'string' && dateValue.length) {\n    var adjustedDate = new Date(dateValue); // if time is not specified in ISOstring, normalize to midnight\n\n    if (dateValue.indexOf('T') === -1) {\n      var offset = adjustedDate.getTimezoneOffset();\n      var hour = adjustedDate.getHours();\n      adjustedDate.setHours(hour, offset);\n    }\n\n    result = adjustedDate;\n  } else if (Array.isArray(dateValue)) {\n    result = dateValue.map(function (d) {\n      return normalizeInput(d);\n    });\n  }\n\n  return result;\n};\n\nvar normalizeOutput = function normalizeOutput(dateValue, outputFormat) {\n  var result;\n\n  var normalize = function normalize(value) {\n    var normalizedValue = value.toISOString();\n\n    if (normalizedValue && outputFormat === 'no timezone') {\n      var _handleOffset$toISOSt = handleOffset(normalizedValue).toISOString().split('T');\n\n      normalizedValue = _handleOffset$toISOSt[0];\n    }\n\n    return normalizedValue;\n  };\n\n  if (dateValue instanceof Date) {\n    result = normalize(dateValue);\n  } else if (typeof dateValue === 'undefined') {\n    result = undefined;\n  } else {\n    result = dateValue.map(function (d) {\n      return normalizeOutput(d, outputFormat);\n    });\n  }\n\n  return result;\n}; // format value to [[]] for internal functions\n\n\nvar normalizeRange = function normalizeRange(value, activeDate) {\n  var range = value;\n  if (range instanceof Date) range = activeDate === 'start' ? [[undefined, range]] : [[range, undefined]];else if (Array.isArray(range) && !Array.isArray(range[0])) range = [range];\n  return range;\n};\n\nvar getReference = function getReference(reference, value) {\n  var nextReference;\n\n  if (value) {\n    if (Array.isArray(value)) {\n      if (value[0] instanceof Date) {\n        nextReference = value[0];\n      } else if (Array.isArray(value[0])) {\n        nextReference = value[0][0] ? value[0][0] : value[0][1];\n      } else {\n        nextReference = new Date();\n        nextReference.setHours(0, 0, 0, 0);\n      }\n    } else nextReference = value;\n  } else if (reference) {\n    nextReference = reference;\n  } else {\n    nextReference = new Date();\n    nextReference.setHours(0, 0, 0, 0);\n  }\n\n  return nextReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nexport var getOutputFormat = function getOutputFormat(dates) {\n  if (typeof dates === 'string' && (dates == null ? void 0 : dates.indexOf('T')) === -1) {\n    return 'no timezone';\n  }\n\n  if (Array.isArray(dates)) {\n    return getOutputFormat(dates[0]);\n  }\n\n  return 'date timezone';\n};\nvar millisecondsPerYear = 31557600000;\n\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\n\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n      fill = _ref.fill,\n      size = _ref.size,\n      isInRange = _ref.isInRange,\n      isSelected = _ref.isSelected,\n      otherMonth = _ref.otherMonth,\n      _ref$buttonProps = _ref.buttonProps,\n      buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    disabledProp: buttonProps.disabled,\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\n\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n      fill = _ref2.fill,\n      size = _ref2.size,\n      buttonProps = _ref2.buttonProps;\n\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\n\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var activeDateProp = _ref3.activeDate,\n      _ref3$animate = _ref3.animate,\n      animate = _ref3$animate === void 0 ? true : _ref3$animate,\n      boundsProp = _ref3.bounds,\n      children = _ref3.children,\n      dateProp = _ref3.date,\n      datesProp = _ref3.dates,\n      daysOfWeek = _ref3.daysOfWeek,\n      disabled = _ref3.disabled,\n      initialFocus = _ref3.initialFocus,\n      fill = _ref3.fill,\n      _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n      firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n      header = _ref3.header,\n      _ref3$locale = _ref3.locale,\n      locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n      messages = _ref3.messages,\n      onReference = _ref3.onReference,\n      onSelect = _ref3.onSelect,\n      range = _ref3.range,\n      referenceProp = _ref3.reference,\n      _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n      showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n      timestampProp = _ref3.timestamp,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format; // when mousedown, we don't want to let Calendar set\n  // active date to firstInMonth\n\n\n  var _useState = useState(false),\n      mouseDown = _useState[0],\n      setMouseDown = _useState[1];\n\n  var onMouseDown = function onMouseDown() {\n    return setMouseDown(true);\n  };\n\n  var onMouseUp = function onMouseUp() {\n    return setMouseDown(false);\n  };\n\n  useEffect(function () {\n    document.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mouseup', onMouseUp);\n    return function () {\n      document.removeEventListener('mousedown', onMouseDown);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []); // set activeDate when caller changes it, allows us to change\n  // it internally too\n\n  var _useState2 = useState(dateProp && typeof dateProp === 'string' && range ? 'end' : 'start'),\n      activeDate = _useState2[0],\n      setActiveDate = _useState2[1];\n\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]);\n\n  var _useState3 = useState(normalizeInput(dateProp || datesProp)),\n      value = _useState3[0],\n      setValue = _useState3[1];\n\n  useEffect(function () {\n    var val = dateProp || datesProp;\n    setValue(normalizeInput(val));\n  }, [dateProp, datesProp]);\n\n  var _useState4 = useState(getReference(normalizeInput(referenceProp), value)),\n      reference = _useState4[0],\n      setReference = _useState4[1];\n\n  useEffect(function () {\n    if (value) {\n      setReference(getReference(normalizeInput(referenceProp), value));\n    }\n  }, [referenceProp, value]);\n\n  var _useState5 = useState(getOutputFormat(dateProp || datesProp)),\n      outputFormat = _useState5[0],\n      setOutputFormat = _useState5[1];\n\n  useEffect(function () {\n    setOutputFormat(getOutputFormat(dateProp || datesProp));\n  }, [dateProp, datesProp]); // normalize bounds\n\n  var _useState6 = useState(boundsProp),\n      bounds = _useState6[0],\n      setBounds = _useState6[1];\n\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp);else setBounds(undefined);\n  }, [boundsProp]); // calculate the bounds we display based on the reference\n\n  var _useState7 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState7[0],\n      setDisplayBounds = _useState7[1];\n\n  var _useState8 = useState(),\n      targetDisplayBounds = _useState8[0],\n      setTargetDisplayBounds = _useState8[1];\n\n  var _useState9 = useState(),\n      slide = _useState9[0],\n      setSlide = _useState9[1];\n\n  var _useState10 = useState(),\n      animating = _useState10[0],\n      setAnimating = _useState10[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek); // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    // if the reference timezone has changed (e.g., controlled component),\n    // both ends of the displayBounds should inherit that new timestamp\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime() || targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], targetDisplayBounds[1]]);\n      }\n\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear && daysApart(displayBounds[0], targetDisplayBounds[0])) {\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear && daysApart(targetDisplayBounds[1], displayBounds[1])) {\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n\n      return undefined;\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]); // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [animating, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n\n  var _useState11 = useState(),\n      focus = _useState11[0],\n      setFocus = _useState11[1];\n\n  var _useState12 = useState(),\n      active = _useState12[0],\n      setActive = _useState12[1];\n\n  useEffect(function () {\n    if (initialFocus === 'days') daysRef.current.focus();\n  }, [initialFocus]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, bounds]);\n  var handleRange = useCallback(function (selectedDate) {\n    var _priorRange$, _priorRange$$, _priorRange$2, _priorRange$2$;\n\n    var result;\n    var priorRange = normalizeRange(value, activeDate); // deselect when date clicked was the start/end of the range\n\n    if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$ = priorRange[0]) == null ? void 0 : (_priorRange$$ = _priorRange$[0]) == null ? void 0 : _priorRange$$.getTime())) {\n      result = [[undefined, priorRange[0][1]]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$2 = priorRange[0]) == null ? void 0 : (_priorRange$2$ = _priorRange$2[1]) == null ? void 0 : _priorRange$2$.getTime())) {\n      result = [[priorRange[0][0], undefined]];\n      setActiveDate('end');\n    } // selecting start date\n    else if (activeDate === 'start') {\n      if (!priorRange) {\n        result = [[selectedDate, undefined]];\n      } else if (!priorRange[0][1]) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() < priorRange[0][1].getTime()) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() > priorRange[0][1].getTime()) {\n        result = [[selectedDate, undefined]];\n      }\n\n      setActiveDate('end');\n    } // selecting end date\n    else if (!priorRange) {\n      result = [[undefined, selectedDate]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() < priorRange[0][0].getTime()) {\n      result = [[selectedDate, undefined]];\n      setActiveDate('end');\n    } else if (selectedDate.getTime() > priorRange[0][0].getTime()) {\n      result = [[priorRange[0][0], selectedDate]];\n      setActiveDate('start');\n    } // If no dates selected, always return undefined; else format\n    // result according to specified range value.\n\n\n    if (result[0].includes(undefined)) {\n      if (range === 'array') {\n        result = !result[0][0] && !result[0][1] ? undefined : result;\n      } else {\n        result = result[0].find(function (d) {\n          return d !== undefined;\n        });\n      }\n    }\n\n    setValue(result);\n    return result;\n  }, [activeDate, value, range]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextValue;\n\n    if (range || Array.isArray(value == null ? void 0 : value[0])) {\n      nextValue = handleRange(selectedDate);\n    } else {\n      nextValue = selectedDate;\n    }\n\n    if (onSelect) {\n      nextValue = normalizeOutput(nextValue, outputFormat);\n      onSelect(nextValue);\n    }\n  }, [handleRange, onSelect, outputFormat, range, value]);\n\n  var _onClick = function onClick(selectedDate) {\n    selectDate(selectedDate);\n    announce(\"Selected \" + getLocaleString(selectedDate, locale), 'assertive'); // Chrome moves the focus indicator to this button. Set\n    // the focus to the grid of days instead.\n\n    daysRef.current.focus();\n    setActive(selectedDate);\n  };\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, bounds),\n      onClick: function onClick() {\n        changeReference(previousMonth);\n        announce(format({\n          id: 'calendar.previousMove',\n          messages: messages,\n          values: {\n            date: previousMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, bounds),\n      onClick: function onClick() {\n        changeReference(nextMonth);\n        announce(format({\n          id: 'calendar.nextMove',\n          messages: messages,\n          values: {\n            date: nextMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      (function () {\n        var dateObject = day; // this.dayRefs[dateObject] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, range ? normalizeRange(value, activeDate) : value);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, normalizeInput(disabled)) || bounds && !betweenDates(day, normalizeInput(bounds));\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateObject;\n        }\n\n        if (!children) {\n          days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n            key: day.getTime(),\n            buttonProps: {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                return _onClick(dateObject);\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(dateObject);\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            },\n            isInRange: inRange,\n            isSelected: selected,\n            otherMonth: day.getMonth() !== reference.getMonth(),\n            size: size,\n            fill: fill\n          }, day.getDate()));\n        } else {\n          days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n            key: day.getTime(),\n            buttonProps: onSelect ? {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                return _onClick(dateObject);\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(dateObject);\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            } : null,\n            size: size,\n            fill: fill\n          }, children({\n            date: day,\n            day: day.getDate(),\n            isInRange: inRange,\n            isSelected: selected\n          })));\n        }\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return active !== undefined ? _onClick(active) : undefined;\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n\n      if (!betweenDates(addDays(active, -7), displayBounds)) {\n        changeReference(addDays(active, -7));\n      }\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n\n      if (!betweenDates(addDays(active, 7), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onLeft: function onLeft() {\n      setActive(addDays(active, -1));\n\n      if (!betweenDates(addDays(active, -1), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onRight: function onRight() {\n      setActive(addDays(active, 1));\n\n      if (!betweenDates(addDays(active, 2), displayBounds)) {\n        changeReference(active);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    tabIndex: 0,\n    role: \"grid\",\n    \"aria-label\": reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \"; \" + currentlySelectedString(value, locale),\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true); // caller focused onto Calendar via keyboard\n\n      if (!mouseDown) {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };"],"mappings":"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"},"metadata":{},"sourceType":"module"}