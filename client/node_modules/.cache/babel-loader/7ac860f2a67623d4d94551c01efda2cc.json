{"ast":null,"code":"var _excluded = [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"messages\", \"mute\", \"onDurationChange\", \"onEnded\", \"onPause\", \"onPlay\", \"onTimeUpdate\", \"onVolumeChange\", \"skipInterval\"];\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { defaultProps } from '../../default-props';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { Keyboard } from '../Keyboard';\nimport { containsFocus, useForwardedRef } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { VideoPropTypes } from './propTypes'; // Split the volume control into 6 segments. Empirically determined.\n\nvar VOLUME_STEP = 0.166667;\n\nvar formatTime = function formatTime(time) {\n  var minutes = Math.round(time / 60);\n\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n\n  var seconds = Math.round(time) % 60;\n\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n\n  return minutes + \":\" + seconds;\n};\n\nvar Video = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var alignSelf = _ref.alignSelf,\n      autoPlay = _ref.autoPlay,\n      children = _ref.children,\n      controlsProp = _ref.controls,\n      gridArea = _ref.gridArea,\n      loop = _ref.loop,\n      margin = _ref.margin,\n      messages = _ref.messages,\n      mute = _ref.mute,\n      _onDurationChange = _ref.onDurationChange,\n      _onEnded = _ref.onEnded,\n      _onPause = _ref.onPause,\n      _onPlay = _ref.onPlay,\n      _onTimeUpdate = _ref.onTimeUpdate,\n      _onVolumeChange = _ref.onVolumeChange,\n      skipInterval = _ref.skipInterval,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var announce = useContext(AnnounceContext);\n\n  var _useState = useState([]),\n      captions = _useState[0],\n      setCaptions = _useState[1];\n\n  var _useState2 = useState(),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  var _useState4 = useState(),\n      percentagePlayed = _useState4[0],\n      setPercentagePlayed = _useState4[1];\n\n  var _useState5 = useState(false),\n      playing = _useState5[0],\n      setPlaying = _useState5[1];\n\n  var _useState6 = useState(false),\n      announceAudioDescription = _useState6[0],\n      setAnnounceAudioDescription = _useState6[1];\n\n  var _useState7 = useState(),\n      scrubTime = _useState7[0],\n      setScrubTime = _useState7[1];\n\n  var _useState8 = useState(),\n      volume = _useState8[0],\n      setVolume = _useState8[1];\n\n  var _useState9 = useState(false),\n      hasPlayed = _useState9[0],\n      setHasPlayed = _useState9[1];\n\n  var _useState10 = useState(),\n      interacting = _useState10[0],\n      setInteracting = _useState10[1];\n\n  var _useState11 = useState(),\n      height = _useState11[0],\n      setHeight = _useState11[1];\n\n  var _useState12 = useState(),\n      width = _useState12[0],\n      setWidth = _useState12[1];\n\n  var containerRef = useRef();\n  var scrubberRef = useRef();\n  var videoRef = useForwardedRef(ref);\n  var controls = useMemo(function () {\n    var result;\n\n    if (typeof controlsProp === 'string' || typeof controlsProp === 'boolean') {\n      result = {\n        items: ['volume', 'fullScreen'],\n        position: controlsProp\n      };\n    } else {\n      result = {\n        items: (controlsProp == null ? void 0 : controlsProp.items) || ['volume', 'fullScreen'],\n        position: (controlsProp == null ? void 0 : controlsProp.position) || 'over'\n      };\n    }\n\n    return result;\n  }, [controlsProp]); // mute if needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]); // when the video is first rendered, set state from it where needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      setVolume(videoRef.current.volume);\n    }\n  }, [videoRef]); // turn off interacting after a while\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (interacting && !containsFocus(containerRef.current)) {\n        setInteracting(false);\n      }\n    }, 3000);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [interacting]); // track which audio description track is active\n\n  var _useState13 = useState(),\n      activeTrack = _useState13[0],\n      setActiveTrack = _useState13[1];\n\n  useLayoutEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      if (video.videoHeight) {\n        // set the size based on the video aspect ratio\n        var rect = video.getBoundingClientRect();\n        var ratio = rect.width / rect.height;\n        var videoRatio = video.videoWidth / video.videoHeight;\n\n        if (videoRatio > ratio) {\n          var nextHeight = rect.width / videoRatio;\n\n          if (nextHeight !== height) {\n            setHeight(nextHeight);\n            setWidth(undefined);\n          }\n        } else {\n          var nextWidth = rect.height * videoRatio;\n\n          if (nextWidth !== width) {\n            setHeight(undefined);\n            setWidth(nextWidth);\n          }\n        }\n      } // remember the state of the text tracks for subsequent rendering\n\n\n      var textTracks = video.textTracks;\n      var nextCaptions = [];\n      var set = false; // iterate through all of the tracks provided\n\n      var _loop = function _loop(i) {\n        var track = textTracks[i];\n        var active = track.mode === 'showing';\n\n        var getActiveTrack = function getActiveTrack(currentVideoTime) {\n          var nextActiveTrack;\n\n          for (var j = 0; j < track.cues.length; j += 1) {\n            var _track$cues$j, _track$cues$j2;\n\n            if (currentVideoTime > (track == null ? void 0 : (_track$cues$j = track.cues[j]) == null ? void 0 : _track$cues$j.startTime) && currentVideoTime < (track == null ? void 0 : (_track$cues$j2 = track.cues[j]) == null ? void 0 : _track$cues$j2.endTime)) {\n              var _track$cues$j3;\n\n              nextActiveTrack = track == null ? void 0 : (_track$cues$j3 = track.cues[j]) == null ? void 0 : _track$cues$j3.text;\n            }\n          }\n\n          return nextActiveTrack;\n        }; // track is an audio description\n\n\n        if (track.kind === 'descriptions') {\n          if (announceAudioDescription) {\n            video.ontimeupdate = function () {\n              var nextActiveTrack = getActiveTrack(video.currentTime);\n\n              if (activeTrack !== nextActiveTrack) {\n                if (nextActiveTrack) {\n                  announce(nextActiveTrack, 'assertive');\n                }\n\n                setActiveTrack(nextActiveTrack);\n              }\n            };\n          }\n        } // otherwise treat as captions\n        else {\n          nextCaptions.push({\n            label: track.label,\n            active: active\n          });\n\n          if (!captions || !captions[i] || captions[i].active !== active) {\n            set = true;\n          }\n\n          if (set) {\n            setCaptions(nextCaptions);\n          }\n        }\n      };\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        _loop(i);\n      }\n    }\n  }, [activeTrack, announce, announceAudioDescription, captions, height, videoRef, width]);\n  var play = useCallback(function () {\n    return videoRef.current.play();\n  }, [videoRef]);\n  var pause = useCallback(function () {\n    return videoRef.current.pause();\n  }, [videoRef]);\n  var scrub = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    }\n  }, [duration]);\n  var seek = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      if (duration) videoRef.current.currentTime = duration * percent;\n    }\n  }, [duration, videoRef]);\n  var seekForward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime += skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var seekBackward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime -= skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var louder = useCallback(function () {\n    videoRef.current.volume += VOLUME_STEP;\n  }, [videoRef]);\n  var quieter = useCallback(function () {\n    videoRef.current.volume -= VOLUME_STEP;\n  }, [videoRef]);\n  var showCaptions = useCallback(function (index) {\n    var textTracks = videoRef.current.textTracks;\n\n    for (var i = 0; i < textTracks.length; i += 1) {\n      textTracks[i].mode = i === index ? 'showing' : 'hidden';\n    }\n  }, [videoRef]);\n  var fullscreen = useCallback(function () {\n    var video = videoRef.current;\n\n    if (video.requestFullscreen) {\n      video.requestFullscreen();\n    } else if (video.msRequestFullscreen) {\n      video.msRequestFullscreen();\n    } else if (video.mozRequestFullScreen) {\n      video.mozRequestFullScreen();\n    } else if (video.webkitRequestFullscreen) {\n      video.webkitRequestFullscreen();\n    } else {\n      console.warn(\"This browser doesn't support fullscreen.\");\n    }\n  }, [videoRef]);\n  var controlsElement;\n\n  if (controls != null && controls.position) {\n    var _controls$items;\n\n    var over = controls.position === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'background-back',\n      opacity: 'strong',\n      dark: true\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'text');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume,\n      Description: theme.video.icons.description\n    };\n    var captionControls = captions.map(function (caption, index) {\n      return {\n        icon: caption.label ? undefined : /*#__PURE__*/React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        a11yTitle: caption.label || format({\n          id: 'video.captions',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          showCaptions(caption.active ? -1 : index);\n          var updatedCaptions = [];\n\n          for (var i = 0; i < captions.length; i += 1) {\n            updatedCaptions.push(captions[i]); // set other captions to active=false\n\n            if (i !== index && updatedCaptions[i].active) updatedCaptions[i].active = false; // set the currently selected captions to active\n            else if (i === index) updatedCaptions[i].active = !captions[index].active;\n          }\n\n          setCaptions(updatedCaptions);\n        }\n      };\n    });\n    var descriptionControls = {\n      icon: /*#__PURE__*/React.createElement(Icons.Description, {\n        color: iconColor\n      }),\n      a11yTitle: format({\n        id: 'video.audioDescriptions',\n        messages: messages\n      }),\n      active: announceAudioDescription,\n      onClick: function onClick() {\n        return setAnnounceAudioDescription(!announceAudioDescription);\n      }\n    };\n    var volumeControls = ['volume', 'reduceVolume'].map(function (control) {\n      return {\n        icon: control === 'volume' ? /*#__PURE__*/React.createElement(Icons.Volume, {\n          color: iconColor\n        }) : /*#__PURE__*/React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: control === 'volume' ? 'video.volumeUp' : 'video.volumeDown',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          if (volume <= 1 - VOLUME_STEP && control === 'volume') {\n            return louder();\n          }\n\n          if (volume >= VOLUME_STEP && control === 'reduceVolume') {\n            return quieter();\n          }\n\n          return undefined;\n        },\n        close: false\n      };\n    });\n    var buttonProps = {\n      captions: captionControls,\n      descriptions: descriptionControls,\n      volume: volumeControls,\n      fullScreen: {\n        icon: /*#__PURE__*/React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.fullScreen',\n          messages: messages\n        }),\n        onClick: fullscreen\n      },\n      pause: {\n        icon: /*#__PURE__*/React.createElement(Icons.Pause, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        }),\n        disabled: !playing,\n        onClick: pause\n      },\n      play: {\n        icon: /*#__PURE__*/React.createElement(Icons.Play, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        }),\n        disabled: playing,\n        onClick: play\n      }\n    };\n    var controlsMenuItems = [];\n    (_controls$items = controls.items) == null ? void 0 : _controls$items.map(function (item) {\n      if (item === 'volume') {\n        volumeControls.map(function (control) {\n          return controlsMenuItems.push(control);\n        });\n        return undefined;\n      }\n\n      if (item === 'captions' && typeof buttonProps[item] === 'object') {\n        for (var i = 0; i < buttonProps[item].length; i += 1) {\n          controlsMenuItems.push(buttonProps[item][i]);\n        }\n\n        return undefined;\n      }\n\n      if (item === 'descriptions') {\n        controlsMenuItems.push(buttonProps[item]);\n        return undefined;\n      }\n\n      if (typeof item === 'string') {\n        return controlsMenuItems.push(buttonProps[item]);\n      }\n\n      return controlsMenuItems.push(item);\n    });\n    controlsElement = /*#__PURE__*/React.createElement(StyledVideoControls, {\n      over: over,\n      active: !hasPlayed || controls.position === 'below' || over && interacting,\n      onBlur: function onBlur() {\n        if (!containsFocus(containerRef.current)) setInteracting(false);\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: playing ? /*#__PURE__*/React.createElement(Icons.Pause, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        })\n      }) : /*#__PURE__*/React.createElement(Icons.Play, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        })\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? pause : play,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true\n    }, /*#__PURE__*/React.createElement(Stack, null, /*#__PURE__*/React.createElement(Meter, {\n      \"aria-label\": format({\n        id: 'video.progressMeter',\n        messages: messages\n      }),\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: \"small\",\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), /*#__PURE__*/React.createElement(StyledVideoScrubber, {\n      \"aria-label\": format({\n        id: 'video.scrubber',\n        messages: messages\n      }),\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: scrub,\n      onMouseLeave: function onMouseLeave() {\n        return setScrubTime(undefined);\n      },\n      onClick: seek,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }))), /*#__PURE__*/React.createElement(Box, {\n      pad: {\n        horizontal: 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), /*#__PURE__*/React.createElement(Menu, {\n      icon: /*#__PURE__*/React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      messages: {\n        openMenu: format({\n          id: 'video.openMenu',\n          messages: messages\n        }),\n        closeMenu: format({\n          id: 'video.closeMenu',\n          messages: messages\n        })\n      },\n      items: [].concat(controlsMenuItems),\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    })));\n  }\n\n  var mouseEventListeners;\n\n  if ((controls == null ? void 0 : controls.position) === 'over') {\n    mouseEventListeners = {\n      onMouseEnter: function onMouseEnter() {\n        return setInteracting(true);\n      },\n      onMouseMove: function onMouseMove() {\n        return setInteracting(true);\n      },\n      onTouchStart: function onTouchStart() {\n        return setInteracting(true);\n      }\n    };\n  }\n\n  var style;\n\n  if (rest.fit === 'contain' && (controls == null ? void 0 : controls.position) === 'over') {\n    // constrain the size to fit the aspect ratio so the controls\n    // overlap correctly\n    if (width) {\n      style = {\n        width: width\n      };\n    } else if (height) {\n      style = {\n        height: height\n      };\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: seekBackward,\n    onRight: seekForward\n  }, /*#__PURE__*/React.createElement(StyledVideoContainer, _extends({\n    ref: containerRef\n  }, mouseEventListeners, {\n    alignSelf: alignSelf,\n    gridArea: gridArea,\n    margin: margin,\n    style: style,\n    tabIndex: \"-1\"\n  }), /*#__PURE__*/React.createElement(StyledVideo, _extends({}, rest, {\n    ref: videoRef,\n    onDurationChange: function onDurationChange(event) {\n      var video = videoRef.current;\n      setDuration(video.duration);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onDurationChange) _onDurationChange(event);\n    },\n    onEnded: function onEnded(event) {\n      setPlaying(false);\n      if (_onEnded) _onEnded(event);\n    },\n    onPause: function onPause(event) {\n      setPlaying(false);\n      if (_onPause) _onPause(event);\n    },\n    onPlay: function onPlay(event) {\n      setPlaying(true);\n      setHasPlayed(true);\n      if (_onPlay) _onPlay(event);\n    },\n    onTimeUpdate: function onTimeUpdate(event) {\n      var video = videoRef.current;\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onTimeUpdate) _onTimeUpdate(event);\n    },\n    onVolumeChange: function onVolumeChange(event) {\n      setVolume(videoRef.current.volume);\n      if (_onVolumeChange) _onVolumeChange(event);\n    },\n    autoPlay: autoPlay || false,\n    loop: loop || false\n  }), children), controlsElement));\n});\nVideo.defaultProps = {};\nVideo.displayName = 'Video';\nVideo.propTypes = VideoPropTypes;\nexport { Video };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useEffect","useMemo","useRef","useState","ThemeContext","useLayoutEffect","defaultProps","AnnounceContext","Box","Button","Menu","Meter","Stack","Text","Keyboard","containsFocus","useForwardedRef","StyledVideo","StyledVideoContainer","StyledVideoControls","StyledVideoScrubber","MessageContext","VideoPropTypes","VOLUME_STEP","formatTime","time","minutes","Math","round","seconds","Video","_ref","ref","alignSelf","autoPlay","children","controlsProp","controls","gridArea","loop","margin","messages","mute","_onDurationChange","onDurationChange","_onEnded","onEnded","_onPause","onPause","_onPlay","onPlay","_onTimeUpdate","onTimeUpdate","_onVolumeChange","onVolumeChange","skipInterval","rest","theme","_useContext","format","announce","_useState","captions","setCaptions","_useState2","currentTime","setCurrentTime","_useState3","duration","setDuration","_useState4","percentagePlayed","setPercentagePlayed","_useState5","playing","setPlaying","_useState6","announceAudioDescription","setAnnounceAudioDescription","_useState7","scrubTime","setScrubTime","_useState8","volume","setVolume","_useState9","hasPlayed","setHasPlayed","_useState10","interacting","setInteracting","_useState11","height","setHeight","_useState12","width","setWidth","containerRef","scrubberRef","videoRef","result","items","position","video","current","muted","textTracks","mode","timer","setTimeout","clearTimeout","_useState13","activeTrack","setActiveTrack","videoHeight","rect","getBoundingClientRect","ratio","videoRatio","videoWidth","nextHeight","undefined","nextWidth","nextCaptions","set","_loop","track","active","getActiveTrack","currentVideoTime","nextActiveTrack","j","cues","_track$cues$j","_track$cues$j2","startTime","endTime","_track$cues$j3","text","kind","ontimeupdate","push","label","play","pause","scrub","event","scrubberRect","percent","clientX","left","seek","seekForward","scrubber","interval","seekBackward","louder","quieter","showCaptions","index","fullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","console","warn","controlsElement","_controls$items","over","background","color","opacity","dark","iconColor","icons","formattedTime","Icons","ClosedCaption","closedCaption","Configure","configure","FullScreen","fullScreen","Pause","Play","ReduceVolume","reduceVolume","Volume","Description","description","captionControls","map","caption","icon","createElement","a11yTitle","id","onClick","updatedCaptions","descriptionControls","volumeControls","control","close","buttonProps","descriptions","disabled","controlsMenuItems","item","onBlur","direction","align","justify","hoverIndicator","onFocus","flex","size","thickness","values","value","tabIndex","role","onMouseMove","onMouseLeave","pad","horizontal","dropAlign","bottom","right","dropBackground","openMenu","closeMenu","concat","mouseEventListeners","onMouseEnter","onTouchStart","style","fit","onLeft","onRight","displayName","propTypes"],"sources":["/Users/siddharthkhatri/Developer/React JS/phone-book/client/node_modules/grommet/es6/components/Video/Video.js"],"sourcesContent":["var _excluded = [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"messages\", \"mute\", \"onDurationChange\", \"onEnded\", \"onPause\", \"onPlay\", \"onTimeUpdate\", \"onVolumeChange\", \"skipInterval\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { defaultProps } from '../../default-props';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { Keyboard } from '../Keyboard';\nimport { containsFocus, useForwardedRef } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { VideoPropTypes } from './propTypes'; // Split the volume control into 6 segments. Empirically determined.\n\nvar VOLUME_STEP = 0.166667;\n\nvar formatTime = function formatTime(time) {\n  var minutes = Math.round(time / 60);\n\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n\n  var seconds = Math.round(time) % 60;\n\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n\n  return minutes + \":\" + seconds;\n};\n\nvar Video = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var alignSelf = _ref.alignSelf,\n      autoPlay = _ref.autoPlay,\n      children = _ref.children,\n      controlsProp = _ref.controls,\n      gridArea = _ref.gridArea,\n      loop = _ref.loop,\n      margin = _ref.margin,\n      messages = _ref.messages,\n      mute = _ref.mute,\n      _onDurationChange = _ref.onDurationChange,\n      _onEnded = _ref.onEnded,\n      _onPause = _ref.onPause,\n      _onPlay = _ref.onPlay,\n      _onTimeUpdate = _ref.onTimeUpdate,\n      _onVolumeChange = _ref.onVolumeChange,\n      skipInterval = _ref.skipInterval,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var announce = useContext(AnnounceContext);\n\n  var _useState = useState([]),\n      captions = _useState[0],\n      setCaptions = _useState[1];\n\n  var _useState2 = useState(),\n      currentTime = _useState2[0],\n      setCurrentTime = _useState2[1];\n\n  var _useState3 = useState(),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  var _useState4 = useState(),\n      percentagePlayed = _useState4[0],\n      setPercentagePlayed = _useState4[1];\n\n  var _useState5 = useState(false),\n      playing = _useState5[0],\n      setPlaying = _useState5[1];\n\n  var _useState6 = useState(false),\n      announceAudioDescription = _useState6[0],\n      setAnnounceAudioDescription = _useState6[1];\n\n  var _useState7 = useState(),\n      scrubTime = _useState7[0],\n      setScrubTime = _useState7[1];\n\n  var _useState8 = useState(),\n      volume = _useState8[0],\n      setVolume = _useState8[1];\n\n  var _useState9 = useState(false),\n      hasPlayed = _useState9[0],\n      setHasPlayed = _useState9[1];\n\n  var _useState10 = useState(),\n      interacting = _useState10[0],\n      setInteracting = _useState10[1];\n\n  var _useState11 = useState(),\n      height = _useState11[0],\n      setHeight = _useState11[1];\n\n  var _useState12 = useState(),\n      width = _useState12[0],\n      setWidth = _useState12[1];\n\n  var containerRef = useRef();\n  var scrubberRef = useRef();\n  var videoRef = useForwardedRef(ref);\n  var controls = useMemo(function () {\n    var result;\n\n    if (typeof controlsProp === 'string' || typeof controlsProp === 'boolean') {\n      result = {\n        items: ['volume', 'fullScreen'],\n        position: controlsProp\n      };\n    } else {\n      result = {\n        items: (controlsProp == null ? void 0 : controlsProp.items) || ['volume', 'fullScreen'],\n        position: (controlsProp == null ? void 0 : controlsProp.position) || 'over'\n      };\n    }\n\n    return result;\n  }, [controlsProp]); // mute if needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]); // when the video is first rendered, set state from it where needed\n\n  useEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      setVolume(videoRef.current.volume);\n    }\n  }, [videoRef]); // turn off interacting after a while\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (interacting && !containsFocus(containerRef.current)) {\n        setInteracting(false);\n      }\n    }, 3000);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [interacting]); // track which audio description track is active\n\n  var _useState13 = useState(),\n      activeTrack = _useState13[0],\n      setActiveTrack = _useState13[1];\n\n  useLayoutEffect(function () {\n    var video = videoRef.current;\n\n    if (video) {\n      if (video.videoHeight) {\n        // set the size based on the video aspect ratio\n        var rect = video.getBoundingClientRect();\n        var ratio = rect.width / rect.height;\n        var videoRatio = video.videoWidth / video.videoHeight;\n\n        if (videoRatio > ratio) {\n          var nextHeight = rect.width / videoRatio;\n\n          if (nextHeight !== height) {\n            setHeight(nextHeight);\n            setWidth(undefined);\n          }\n        } else {\n          var nextWidth = rect.height * videoRatio;\n\n          if (nextWidth !== width) {\n            setHeight(undefined);\n            setWidth(nextWidth);\n          }\n        }\n      } // remember the state of the text tracks for subsequent rendering\n\n\n      var textTracks = video.textTracks;\n      var nextCaptions = [];\n      var set = false; // iterate through all of the tracks provided\n\n      var _loop = function _loop(i) {\n        var track = textTracks[i];\n        var active = track.mode === 'showing';\n\n        var getActiveTrack = function getActiveTrack(currentVideoTime) {\n          var nextActiveTrack;\n\n          for (var j = 0; j < track.cues.length; j += 1) {\n            var _track$cues$j, _track$cues$j2;\n\n            if (currentVideoTime > (track == null ? void 0 : (_track$cues$j = track.cues[j]) == null ? void 0 : _track$cues$j.startTime) && currentVideoTime < (track == null ? void 0 : (_track$cues$j2 = track.cues[j]) == null ? void 0 : _track$cues$j2.endTime)) {\n              var _track$cues$j3;\n\n              nextActiveTrack = track == null ? void 0 : (_track$cues$j3 = track.cues[j]) == null ? void 0 : _track$cues$j3.text;\n            }\n          }\n\n          return nextActiveTrack;\n        }; // track is an audio description\n\n\n        if (track.kind === 'descriptions') {\n          if (announceAudioDescription) {\n            video.ontimeupdate = function () {\n              var nextActiveTrack = getActiveTrack(video.currentTime);\n\n              if (activeTrack !== nextActiveTrack) {\n                if (nextActiveTrack) {\n                  announce(nextActiveTrack, 'assertive');\n                }\n\n                setActiveTrack(nextActiveTrack);\n              }\n            };\n          }\n        } // otherwise treat as captions\n        else {\n          nextCaptions.push({\n            label: track.label,\n            active: active\n          });\n\n          if (!captions || !captions[i] || captions[i].active !== active) {\n            set = true;\n          }\n\n          if (set) {\n            setCaptions(nextCaptions);\n          }\n        }\n      };\n\n      for (var i = 0; i < textTracks.length; i += 1) {\n        _loop(i);\n      }\n    }\n  }, [activeTrack, announce, announceAudioDescription, captions, height, videoRef, width]);\n  var play = useCallback(function () {\n    return videoRef.current.play();\n  }, [videoRef]);\n  var pause = useCallback(function () {\n    return videoRef.current.pause();\n  }, [videoRef]);\n  var scrub = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    }\n  }, [duration]);\n  var seek = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      if (duration) videoRef.current.currentTime = duration * percent;\n    }\n  }, [duration, videoRef]);\n  var seekForward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime += skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var seekBackward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime -= skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var louder = useCallback(function () {\n    videoRef.current.volume += VOLUME_STEP;\n  }, [videoRef]);\n  var quieter = useCallback(function () {\n    videoRef.current.volume -= VOLUME_STEP;\n  }, [videoRef]);\n  var showCaptions = useCallback(function (index) {\n    var textTracks = videoRef.current.textTracks;\n\n    for (var i = 0; i < textTracks.length; i += 1) {\n      textTracks[i].mode = i === index ? 'showing' : 'hidden';\n    }\n  }, [videoRef]);\n  var fullscreen = useCallback(function () {\n    var video = videoRef.current;\n\n    if (video.requestFullscreen) {\n      video.requestFullscreen();\n    } else if (video.msRequestFullscreen) {\n      video.msRequestFullscreen();\n    } else if (video.mozRequestFullScreen) {\n      video.mozRequestFullScreen();\n    } else if (video.webkitRequestFullscreen) {\n      video.webkitRequestFullscreen();\n    } else {\n      console.warn(\"This browser doesn't support fullscreen.\");\n    }\n  }, [videoRef]);\n  var controlsElement;\n\n  if (controls != null && controls.position) {\n    var _controls$items;\n\n    var over = controls.position === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'background-back',\n      opacity: 'strong',\n      dark: true\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'text');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume,\n      Description: theme.video.icons.description\n    };\n    var captionControls = captions.map(function (caption, index) {\n      return {\n        icon: caption.label ? undefined : /*#__PURE__*/React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        a11yTitle: caption.label || format({\n          id: 'video.captions',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          showCaptions(caption.active ? -1 : index);\n          var updatedCaptions = [];\n\n          for (var i = 0; i < captions.length; i += 1) {\n            updatedCaptions.push(captions[i]); // set other captions to active=false\n\n            if (i !== index && updatedCaptions[i].active) updatedCaptions[i].active = false; // set the currently selected captions to active\n            else if (i === index) updatedCaptions[i].active = !captions[index].active;\n          }\n\n          setCaptions(updatedCaptions);\n        }\n      };\n    });\n    var descriptionControls = {\n      icon: /*#__PURE__*/React.createElement(Icons.Description, {\n        color: iconColor\n      }),\n      a11yTitle: format({\n        id: 'video.audioDescriptions',\n        messages: messages\n      }),\n      active: announceAudioDescription,\n      onClick: function onClick() {\n        return setAnnounceAudioDescription(!announceAudioDescription);\n      }\n    };\n    var volumeControls = ['volume', 'reduceVolume'].map(function (control) {\n      return {\n        icon: control === 'volume' ? /*#__PURE__*/React.createElement(Icons.Volume, {\n          color: iconColor\n        }) : /*#__PURE__*/React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: control === 'volume' ? 'video.volumeUp' : 'video.volumeDown',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          if (volume <= 1 - VOLUME_STEP && control === 'volume') {\n            return louder();\n          }\n\n          if (volume >= VOLUME_STEP && control === 'reduceVolume') {\n            return quieter();\n          }\n\n          return undefined;\n        },\n        close: false\n      };\n    });\n    var buttonProps = {\n      captions: captionControls,\n      descriptions: descriptionControls,\n      volume: volumeControls,\n      fullScreen: {\n        icon: /*#__PURE__*/React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.fullScreen',\n          messages: messages\n        }),\n        onClick: fullscreen\n      },\n      pause: {\n        icon: /*#__PURE__*/React.createElement(Icons.Pause, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        }),\n        disabled: !playing,\n        onClick: pause\n      },\n      play: {\n        icon: /*#__PURE__*/React.createElement(Icons.Play, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        }),\n        disabled: playing,\n        onClick: play\n      }\n    };\n    var controlsMenuItems = [];\n    (_controls$items = controls.items) == null ? void 0 : _controls$items.map(function (item) {\n      if (item === 'volume') {\n        volumeControls.map(function (control) {\n          return controlsMenuItems.push(control);\n        });\n        return undefined;\n      }\n\n      if (item === 'captions' && typeof buttonProps[item] === 'object') {\n        for (var i = 0; i < buttonProps[item].length; i += 1) {\n          controlsMenuItems.push(buttonProps[item][i]);\n        }\n\n        return undefined;\n      }\n\n      if (item === 'descriptions') {\n        controlsMenuItems.push(buttonProps[item]);\n        return undefined;\n      }\n\n      if (typeof item === 'string') {\n        return controlsMenuItems.push(buttonProps[item]);\n      }\n\n      return controlsMenuItems.push(item);\n    });\n    controlsElement = /*#__PURE__*/React.createElement(StyledVideoControls, {\n      over: over,\n      active: !hasPlayed || controls.position === 'below' || over && interacting,\n      onBlur: function onBlur() {\n        if (!containsFocus(containerRef.current)) setInteracting(false);\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: playing ? /*#__PURE__*/React.createElement(Icons.Pause, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        })\n      }) : /*#__PURE__*/React.createElement(Icons.Play, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        })\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? pause : play,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true\n    }, /*#__PURE__*/React.createElement(Stack, null, /*#__PURE__*/React.createElement(Meter, {\n      \"aria-label\": format({\n        id: 'video.progressMeter',\n        messages: messages\n      }),\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: \"small\",\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), /*#__PURE__*/React.createElement(StyledVideoScrubber, {\n      \"aria-label\": format({\n        id: 'video.scrubber',\n        messages: messages\n      }),\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: scrub,\n      onMouseLeave: function onMouseLeave() {\n        return setScrubTime(undefined);\n      },\n      onClick: seek,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }))), /*#__PURE__*/React.createElement(Box, {\n      pad: {\n        horizontal: 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), /*#__PURE__*/React.createElement(Menu, {\n      icon: /*#__PURE__*/React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      messages: {\n        openMenu: format({\n          id: 'video.openMenu',\n          messages: messages\n        }),\n        closeMenu: format({\n          id: 'video.closeMenu',\n          messages: messages\n        })\n      },\n      items: [].concat(controlsMenuItems),\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    })));\n  }\n\n  var mouseEventListeners;\n\n  if ((controls == null ? void 0 : controls.position) === 'over') {\n    mouseEventListeners = {\n      onMouseEnter: function onMouseEnter() {\n        return setInteracting(true);\n      },\n      onMouseMove: function onMouseMove() {\n        return setInteracting(true);\n      },\n      onTouchStart: function onTouchStart() {\n        return setInteracting(true);\n      }\n    };\n  }\n\n  var style;\n\n  if (rest.fit === 'contain' && (controls == null ? void 0 : controls.position) === 'over') {\n    // constrain the size to fit the aspect ratio so the controls\n    // overlap correctly\n    if (width) {\n      style = {\n        width: width\n      };\n    } else if (height) {\n      style = {\n        height: height\n      };\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: seekBackward,\n    onRight: seekForward\n  }, /*#__PURE__*/React.createElement(StyledVideoContainer, _extends({\n    ref: containerRef\n  }, mouseEventListeners, {\n    alignSelf: alignSelf,\n    gridArea: gridArea,\n    margin: margin,\n    style: style,\n    tabIndex: \"-1\"\n  }), /*#__PURE__*/React.createElement(StyledVideo, _extends({}, rest, {\n    ref: videoRef,\n    onDurationChange: function onDurationChange(event) {\n      var video = videoRef.current;\n      setDuration(video.duration);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onDurationChange) _onDurationChange(event);\n    },\n    onEnded: function onEnded(event) {\n      setPlaying(false);\n      if (_onEnded) _onEnded(event);\n    },\n    onPause: function onPause(event) {\n      setPlaying(false);\n      if (_onPause) _onPause(event);\n    },\n    onPlay: function onPlay(event) {\n      setPlaying(true);\n      setHasPlayed(true);\n      if (_onPlay) _onPlay(event);\n    },\n    onTimeUpdate: function onTimeUpdate(event) {\n      var video = videoRef.current;\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onTimeUpdate) _onTimeUpdate(event);\n    },\n    onVolumeChange: function onVolumeChange(event) {\n      setVolume(videoRef.current.volume);\n      if (_onVolumeChange) _onVolumeChange(event);\n    },\n    autoPlay: autoPlay || false,\n    loop: loop || false\n  }), children), controlsElement));\n});\nVideo.defaultProps = {};\nVideo.displayName = 'Video';\nVideo.propTypes = VideoPropTypes;\nexport { Video };"],"mappings":"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"},"metadata":{},"sourceType":"module"}