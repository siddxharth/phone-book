{"ast":null,"code":"var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\n\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n    return buildGroupState(groups, groupBy);\n  }),\n      groupState = _useState[0],\n      setGroupState = _useState[1];\n\n  var _useState2 = useState({\n    groups: groups,\n    groupBy: groupBy\n  }),\n      prevDeps = _useState2[0],\n      setPrevDeps = _useState2[1];\n\n  var prevGroups = prevDeps.groups,\n      prevGroupBy = prevDeps.groupBy;\n\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n\n  return [groupState, setGroupState];\n}\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      disabled = _ref.disabled,\n      fill = _ref.fill,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSelect = _ref.onSelect,\n      onSortProp = _ref.onSort,\n      onUpdate = _ref.onUpdate,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      paginate = _ref.paginate,\n      pin = _ref.pin,\n      placeholder = _ref.placeholder,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      select = _ref.select,\n      showProp = _ref.show,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      rowDetails = _ref.rowDetails,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      verticalAlign = _ref.verticalAlign,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // property name of the primary property\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState3 = useState(),\n      filtering = _useState3[0],\n      setFiltering = _useState3[1]; // the currently active filters\n\n\n  var _useState4 = useState(initializeFilters(columns)),\n      filters = _useState4[0],\n      setFilters = _useState4[1]; // which column we are sorting on, with direction\n\n\n  var _useState5 = useState(sortProp || {}),\n      sort = _useState5[0],\n      setSort = _useState5[1]; // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n\n\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // cell styling properties: background, border, pad\n\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]); // an object indicating which group values are expanded\n\n  var _useGroupState = useGroupState(groups, groupBy),\n      groupState = _useGroupState[0],\n      setGroupState = _useGroupState[1];\n\n  var _useState6 = useState(step),\n      limit = _useState6[0],\n      setLimit = _useState6[1];\n\n  var _useState7 = useState(select || onSelect && [] || undefined),\n      selected = _useState7[0],\n      setSelected = _useState7[1];\n\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n\n  var _useState8 = useState([]),\n      rowExpand = _useState8[0],\n      setRowExpand = _useState8[1]; // any customized column widths\n\n\n  var _useState9 = useState({}),\n      widths = _useState9[0],\n      setWidths = _useState9[1]; // placeholder placement stuff\n\n\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n\n  var _useState10 = useState(),\n      headerHeight = _useState10[0],\n      setHeaderHeight = _useState10[1];\n\n  var _useState11 = useState(),\n      footerHeight = _useState11[0],\n      setFooterHeight = _useState11[1]; // offset compensation when body overflows\n\n\n  var _useState12 = useState(0),\n      scrollOffset = _useState12[0],\n      setScrollOffset = _useState12[1]; // multiple pinned columns offset\n\n\n  var _useState13 = useState(),\n      pinnedOffset = _useState13[0],\n      setPinnedOffset = _useState13[1];\n\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n\n    var nextPinnedOffset = {};\n\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]); // remember that we are filtering on this property\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n\n  var _usePagination = usePagination(_extends({\n    data: adjustedData,\n    page: normalizeShow(showProp, step),\n    step: step\n  }, paginate)),\n      items = _usePagination[0],\n      paginationProps = _usePagination[1];\n\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined; // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    },\n    flex: false\n  } : undefined; // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: step,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: step,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > step && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\n\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Fragment","ThemeContext","defaultProps","useLayoutEffect","Box","Text","Header","Footer","Body","GroupedBody","Pagination","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizeCellProps","normalizePrimaryProperty","normalizeShow","usePagination","StyledContainer","StyledDataTable","StyledPlaceholder","DataTablePropTypes","PlaceholderBody","useGroupState","groups","groupBy","_useState","groupState","setGroupState","_useState2","prevDeps","setPrevDeps","prevGroups","prevGroupBy","nextGroupState","DataTable","_ref","background","border","_ref$columns","columns","_ref$data","data","disabled","fill","onClickRow","onMore","onSearch","onSelect","onSortProp","onSort","onUpdate","replace","pad","paginate","pin","placeholder","primaryKey","resizeable","rowProps","select","showProp","show","size","sortProp","sort","sortable","rowDetails","_ref$step","step","verticalAlign","rest","theme","primaryProperty","showFooter","filter","c","footer","_useState3","filtering","setFiltering","_useState4","filters","setFilters","_useState5","setSort","adjustedData","footerValues","cellProps","_useGroupState","_useState6","limit","setLimit","_useState7","undefined","selected","setSelected","_useState8","rowExpand","setRowExpand","_useState9","widths","setWidths","headerRef","bodyRef","footerRef","_useState10","headerHeight","setHeaderHeight","_useState11","footerHeight","setFooterHeight","_useState12","scrollOffset","setScrollOffset","_useState13","pinnedOffset","setPinnedOffset","onHeaderWidths","columnWidths","hasSelectColumn","Boolean","pinnedProperties","map","pinnedColumn","property","n","concat","nextPinnedOffset","forEach","index","columnIndex","findIndex","column","width","left","_bodyRef$current$pare","nextScrollOffset","current","parentElement","clientWidth","nextHeaderHeight","getBoundingClientRect","height","nextFooterHeight","onFiltering","onFilter","value","nextFilters","external","direction","nextSort","opts","count","expanded","k","onToggleGroup","groupValue","expandedKeys","onExpand","onToggleGroups","onResize","nextWidths","console","warn","_usePagination","page","items","paginationProps","Container","containterProps","dataTable","container","OverflowContainer","overflowContainerProps","overflow","horizontal","flex","paginatedDataTableProps","style","minWidth","placeholderContent","createElement","color","opacity","align","justify","bodyContent","ref","body","prev","nextSelected","row","onToggle","pinnedCellProps","pinned","fillProp","header","onWidths","top","bottom","alignSelf","propTypes"],"sources":["/Users/siddharthkhatri/Developer/React JS/phone-book/client/node_modules/grommet/es6/components/DataTable/DataTable.js"],"sourcesContent":["var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\n\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n    return buildGroupState(groups, groupBy);\n  }),\n      groupState = _useState[0],\n      setGroupState = _useState[1];\n\n  var _useState2 = useState({\n    groups: groups,\n    groupBy: groupBy\n  }),\n      prevDeps = _useState2[0],\n      setPrevDeps = _useState2[1];\n\n  var prevGroups = prevDeps.groups,\n      prevGroupBy = prevDeps.groupBy;\n\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n\n  return [groupState, setGroupState];\n}\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      disabled = _ref.disabled,\n      fill = _ref.fill,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSelect = _ref.onSelect,\n      onSortProp = _ref.onSort,\n      onUpdate = _ref.onUpdate,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      paginate = _ref.paginate,\n      pin = _ref.pin,\n      placeholder = _ref.placeholder,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      select = _ref.select,\n      showProp = _ref.show,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      rowDetails = _ref.rowDetails,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      verticalAlign = _ref.verticalAlign,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // property name of the primary property\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState3 = useState(),\n      filtering = _useState3[0],\n      setFiltering = _useState3[1]; // the currently active filters\n\n\n  var _useState4 = useState(initializeFilters(columns)),\n      filters = _useState4[0],\n      setFilters = _useState4[1]; // which column we are sorting on, with direction\n\n\n  var _useState5 = useState(sortProp || {}),\n      sort = _useState5[0],\n      setSort = _useState5[1]; // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n\n\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // cell styling properties: background, border, pad\n\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]); // an object indicating which group values are expanded\n\n  var _useGroupState = useGroupState(groups, groupBy),\n      groupState = _useGroupState[0],\n      setGroupState = _useGroupState[1];\n\n  var _useState6 = useState(step),\n      limit = _useState6[0],\n      setLimit = _useState6[1];\n\n  var _useState7 = useState(select || onSelect && [] || undefined),\n      selected = _useState7[0],\n      setSelected = _useState7[1];\n\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n\n  var _useState8 = useState([]),\n      rowExpand = _useState8[0],\n      setRowExpand = _useState8[1]; // any customized column widths\n\n\n  var _useState9 = useState({}),\n      widths = _useState9[0],\n      setWidths = _useState9[1]; // placeholder placement stuff\n\n\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n\n  var _useState10 = useState(),\n      headerHeight = _useState10[0],\n      setHeaderHeight = _useState10[1];\n\n  var _useState11 = useState(),\n      footerHeight = _useState11[0],\n      setFooterHeight = _useState11[1]; // offset compensation when body overflows\n\n\n  var _useState12 = useState(0),\n      scrollOffset = _useState12[0],\n      setScrollOffset = _useState12[1]; // multiple pinned columns offset\n\n\n  var _useState13 = useState(),\n      pinnedOffset = _useState13[0],\n      setPinnedOffset = _useState13[1];\n\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n\n    var nextPinnedOffset = {};\n\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]); // remember that we are filtering on this property\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n\n  var _usePagination = usePagination(_extends({\n    data: adjustedData,\n    page: normalizeShow(showProp, step),\n    step: step\n  }, paginate)),\n      items = _usePagination[0],\n      paginationProps = _usePagination[1];\n\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined; // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    },\n    flex: false\n  } : undefined; // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: step,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: step,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > step && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\n\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };"],"mappings":"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"},"metadata":{},"sourceType":"module"}